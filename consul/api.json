{
  "leave_on_terminate": true,
  "bind_addr": "$(MY_POD_IP)",
  "client_addr": "$(MY_POD_IP)",
  "retry_join": ["$(CONSUL_SERVER)"],
  "service": {
    "name": "api",
    "port": 8081,
    "checks": [{
      "http": "http://localhost:8081/api",
      "interval": "10s",
      "timeout": "1s"
    }],
    "connect": {
      "proxy": {
        "config": {
          "upstreams": [{
            "destination_name": "db",
            "local_bind_port": 8082
          }]
        }
      }
    }
  }
}
